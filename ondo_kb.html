<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Flow | Interactive Q&A</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4cc9f0;
            --dark: #212529;
            --light: #f8f9fa;
            --success: #4ad66d;
            --warning: #f8961e;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: var(--light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            overflow-x: hidden;
        }
        
        .header {
            text-align: center;
            margin-bottom: 2rem;
            animation: fadeIn 1s ease-out;
        }
        
        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            background: linear-gradient(to right, var(--accent), #f72585);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .header p {
            color: rgba(255,255,255,0.7);
            font-size: 1.1rem;
        }
        
        #content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2.5rem;
            width: 100%;
            max-width: 900px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
            z-index: 1;
            min-height: 400px;
            transition: all 0.5s ease;
        }
        
        #content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(76,201,240,0.1) 0%, rgba(0,0,0,0) 70%);
            z-index: -1;
            animation: rotate 20s linear infinite;
        }
        
        body.video-playing #content::before {
            animation-play-state: paused;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .typing {
            border-right: 2px solid var(--accent);
            animation: blink 0.7s step-end infinite;
        }
        
        @keyframes blink {
            from, to { border-color: transparent }
            50% { border-color: var(--accent) }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question {
            font-weight: 600;
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
            line-height: 1.4;
        }
        
        .answer {
            color: var(--success);
            margin-bottom: 1.5rem;
            line-height: 1.6;
            font-size: 1.1rem;
        }
        
        .video-message {
            font-style: italic;
            color: rgba(255,255,255,0.7);
            margin-bottom: 1rem;
        }
        
        /* Coverflow styles */
        #coverflow-container {
            margin-top: 3rem;
            position: relative;
            height: 180px;
            perspective: 1000px;
            width: 100%;
            max-width: 900px;
        }
        
        #coverflow {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            transform-style: preserve-3d;
            position: relative;
        }
        
        .cover-item {
            position: absolute;
            width: 240px;
            height: 150px;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border-radius: 8px;
            overflow: hidden;
            transform-origin: center center;
            background: #000;
            border: 2px solid transparent;
        }
        
        .cover-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }
        
        .cover-item:hover {
            transform: translateZ(30px) scale(1.05);
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            border-color: var(--accent);
        }
        
        .cover-item:hover img {
            transform: scale(1.1);
        }
        
        .cover-item.selected {
            z-index: 10;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            transform: translateZ(60px) scale(1.1);
            border-color: var(--accent);
        }
        
        .cover-item.selected img {
            transform: scale(1.15);
        }
        
        /* Animation for auto-selection */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 201, 240, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(76, 201, 240, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 201, 240, 0); }
        }
        
        .auto-selected {
            animation: pulse 2s ease-out;
        }
        
        /* Progress bar */
        #progress-container {
            width: 100%;
            height: 6px;
            background-color: rgba(255,255,255,0.1);
            margin-top: 2rem;
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }
        
        #progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), #f72585);
            width: 0%;
            transition: width 0.1s linear;
            position: relative;
            border-radius: 3px;
        }
        
        #progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                          transparent, 
                          rgba(255,255,255,0.4), 
                          transparent);
            animation: shine 2s infinite;
        }
        
        body.video-playing #progress-bar::after {
            animation-play-state: paused;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Floating particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            background: rgba(255,255,255,0.5);
            border-radius: 50%;
            animation: float linear infinite;
        }
        
        body.video-playing .particle {
            animation-play-state: paused;
        }
        
        @keyframes float {
            to {
                transform: translateY(-100vh) rotate(360deg);
            }
        }
        
        /* Video expand animation */
        .video-expand {
            position: fixed;
            z-index: 1000;
            transition: all 0.7s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform-origin: center;
            box-shadow: 0 0 0 100vh rgba(0,0,0,0);
            border-radius: 8px;
            overflow: hidden;
            width: 240px;
            height: 150px;
        }
        
        /* Overlay container */
        #video-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        #video-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        #video-overlay-content {
            width: 66.66%;
            max-width: 800px;
            height: 0;
            padding-bottom: 37.5%;
            position: relative;
            transform: scale(0.8);
            transition: transform 0.3s ease 0.4s;
        }
        
        #video-overlay.active #video-overlay-content {
            transform: scale(1);
        }
        
        #video-overlay iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 12px;
        }
        
        #close-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            z-index: 1001;
        }
        
        #close-overlay:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            #content {
                padding: 1.5rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            #video-overlay-content {
                width: 90%;
                padding-bottom: 50.625%;
            }
            
            .cover-item {
                width: 160px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="header">
        <h1>Knowledge Flow</h1>
        <p>Interactive learning experience</p>
    </div>
    
    <div id="content">
        <div id="text-container"></div>
        <div id="progress-container">
            <div id="progress-bar"></div>
        </div>
    </div>
    
    <div id="coverflow-container">
        <div id="coverflow"></div>
    </div>
    
    <div id="video-overlay">
        <button id="close-overlay">×</button>
        <div id="video-overlay-content">
            <iframe id="overlay-video" allowfullscreen></iframe>
        </div>
    </div>

    <script>
        // Questions, answers and videos
        const qaPairs = [
            {
                question: "Why is the sky blue?",
                answer: "The sky appears blue due to Rayleigh scattering, where shorter blue wavelengths of sunlight are scattered in all directions by the gases in Earth's atmosphere more than other colors.",
                videoId: "TxC2Y_Iwtwk",
                title: "Why Is The Sky Blue?"
            },
            {
                question: "What is the capital of France?",
                answer: "The capital of France is Paris, known for its art, fashion, gastronomy and culture. The city is home to landmarks like the Eiffel Tower, Louvre Museum, and Notre-Dame Cathedral.",
                videoId: "DiPF2DSRT28",
                title: "Paris Travel Guide"
            },
            {
                question: "How do plants convert sunlight into energy?",
                answer: "Plants convert sunlight into energy through photosynthesis, using chlorophyll to absorb light and convert carbon dioxide and water into glucose and oxygen. This process is fundamental to life on Earth.",
                videoId: "UD48BTD4UNk",
                title: "Photosynthesis Explained"
            },
            {
                question: "What is the theory of relativity?",
                answer: "Einstein's theory of relativity consists of special relativity (about objects moving at constant speed) and general relativity (about gravity and acceleration), fundamentally changing our understanding of space and time.",
                videoId: "9umtvxQ-XR0",
                title: "Understanding Relativity"
            },
            {
                question: "How does the internet work?",
                answer: "The internet works through a global network of interconnected computers and servers that communicate using standardized protocols (TCP/IP) to transmit data in packets across various physical connections.",
                videoId: "TxC2Y_Iwtwk",
                title: "How The Internet Works"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "What causes the seasons?",
                answer: "Seasons are caused by Earth's axial tilt (23.5°) as it orbits the Sun. Different parts of Earth receive more direct sunlight at different times of year, creating seasonal changes.",
                videoId: "K7u2b2FV84w",
                title: "Earth's Seasons Explained"
            },
            {
                question: "How do vaccines work?",
                answer: "Vaccines work by stimulating the immune system to recognize and combat pathogens (viruses or bacteria) without causing the disease itself, providing immunity against future infections.",
                videoId: "97wme9L2TkM",
                title: "Vaccine Science Explained"
            }
        ];

        // DOM elements
        const textContainer = document.getElementById('text-container');
        const coverflow = document.getElementById('coverflow');
        const progressBar = document.getElementById('progress-bar');
        const particlesContainer = document.getElementById('particles');
        const overlay = document.getElementById('video-overlay');
        const overlayVideo = document.getElementById('overlay-video');
        const closeOverlayBtn = document.getElementById('close-overlay');
        
        // State variables
        let currentQA = null;
        let coverItems = [];
        let sequenceTimeout;
        let progressInterval;
        let videoTimeout;
        let currentIndex = 0;
        const displayDuration = 15000; // 15 seconds per Q&A
        const videoDuration = 10000; // 10 seconds video playtime (30-40s)
        const videoStartTime = 30; // Start at 30 seconds
        
        // Create floating particles
        function createParticles() {
            const particleCount = window.innerWidth < 768 ? 30 : 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Random properties
                const size = Math.random() * 5 + 1;
                const posX = Math.random() * window.innerWidth;
                const posY = Math.random() * window.innerHeight;
                const duration = Math.random() * 20 + 10;
                const delay = Math.random() * 5;
                const opacity = Math.random() * 0.5 + 0.1;
                
                // Apply styles
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}px`;
                particle.style.top = `${posY}px`;
                particle.style.animationDuration = `${duration}s`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.opacity = opacity;
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // Get next QA pair
        function getNextQA() {
            currentIndex = (currentIndex + 1) % qaPairs.length;
            return qaPairs[currentIndex];
        }
        
        // Type text with animation
        async function typeText(element, text, speed = 30) {
            return new Promise(resolve => {
                element.textContent = '';
                let i = 0;
                const typing = setInterval(() => {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(typing);
                        element.classList.remove('typing');
                        resolve();
                    }
                }, speed);
                element.classList.add('typing');
            });
        }
        
        // Create coverflow with video thumbnails
        function createCoverflow() {
            coverflow.innerHTML = '';
            coverItems = [];
            
            qaPairs.forEach((qa, index) => {
                const item = document.createElement('div');
                item.className = 'cover-item';
                item.dataset.videoId = qa.videoId;
                item.dataset.index = index;
                
                const img = document.createElement('img');
                img.src = `https://img.youtube.com/vi/${qa.videoId}/mqdefault.jpg`;
                img.alt = qa.title;
                img.loading = "lazy";
                
                item.appendChild(img);
                coverflow.appendChild(item);
                coverItems.push(item);
                
                item.addEventListener('click', () => {
                    clearTimeout(sequenceTimeout);
                    clearInterval(progressInterval);
                    clearTimeout(videoTimeout);
                    expandVideo(index);
                });
            });
            
            positionCoverItems();
        }
        
        // Position items in coverflow
        function positionCoverItems() {
            const centerIndex = Math.floor(coverItems.length / 2);
            const spacing = window.innerWidth < 768 ? 120 : 180;
            
            coverItems.forEach((item, index) => {
                const offset = index - centerIndex;
                const absOffset = Math.abs(offset);
                const z = -absOffset * 40;
                const rotation = offset * 15;
                
                item.style.transform = `
                    translateX(${offset * spacing}px)
                    translateZ(${z}px)
                    rotateY(${rotation}deg)
                    scale(${1 - absOffset * 0.1})
                `;
                item.style.zIndex = coverItems.length - absOffset;
                item.style.opacity = 1 - absOffset * 0.3;
            });
        }
        
        // Expand video to 2/3 overlay
        function expandVideo(index) {
            const videoId = qaPairs[index].videoId;
            const selectedItem = coverItems[index];
            
            // Pause background animations
            document.body.classList.add('video-playing');
            
            // Get position of the selected cover item
            const rect = selectedItem.getBoundingClientRect();
            
            // Create a temporary element for the animation
            const tempVideo = document.createElement('div');
            tempVideo.className = 'video-expand';
            tempVideo.style.width = `${rect.width}px`;
            tempVideo.style.height = `${rect.height}px`;
            tempVideo.style.left = `${rect.left}px`;
            tempVideo.style.top = `${rect.top}px`;
            
            tempVideo.innerHTML = `
                <iframe src="https://www.youtube.com/embed/${videoId}?start=${videoStartTime}&autoplay=1&rel=0" 
                frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen></iframe>
            `;
            
            document.body.appendChild(tempVideo);
            
            // Calculate final position (centered 2/3 size)
            const finalWidth = window.innerWidth * 0.6666;
            const finalHeight = finalWidth * 0.5625; // 16:9 aspect
            const finalLeft = (window.innerWidth - finalWidth) / 2;
            const finalTop = (window.innerHeight - finalHeight) / 2;
            
            // Trigger the expand animation
            setTimeout(() => {
                tempVideo.style.width = `${finalWidth}px`;
                tempVideo.style.height = `${finalHeight}px`;
                tempVideo.style.left = `${finalLeft}px`;
                tempVideo.style.top = `${finalTop}px`;
                tempVideo.style.boxShadow = '0 0 0 100vh rgba(0,0,0,0.8)';
            }, 10);
            
            // After animation completes
            setTimeout(() => {
                document.body.removeChild(tempVideo);
                overlayVideo.src = `https://www.youtube.com/embed/${videoId}?start=${videoStartTime}&autoplay=1&rel=0`;
                overlay.classList.add('active');
                
                // Auto-close video after duration
                videoTimeout = setTimeout(() => {
                    closeOverlay();
                }, videoDuration);
            }, 700);
        }
        
        // Close overlay
        function closeOverlay() {
            overlay.classList.remove('active');
            overlayVideo.src = '';
            
            // Resume background animations
            document.body.classList.remove('video-playing');
            
            // Start next sequence
            startNextSequence();
        }
        
        // Update progress bar
        function updateProgressBar(percent) {
            progressBar.style.width = `${percent}%`;
        }
        
        // Start the next Q&A sequence
        function startNextSequence() {
            // Clear any existing timeouts/intervals
            clearTimeout(sequenceTimeout);
            clearInterval(progressInterval);
            clearTimeout(videoTimeout);
            
            // Reset progress bar
            updateProgressBar(0);
            
            // Start new sequence
            runSequence();
            
            // Start progress bar animation
            let startTime = Date.now();
            progressInterval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const percent = Math.min(100, (elapsed / displayDuration) * 100);
                updateProgressBar(percent);
                
                if (percent >= 100) {
                    clearInterval(progressInterval);
                }
            }, 100);
            
            // Schedule next sequence
            sequenceTimeout = setTimeout(() => {
                const videoIndex = qaPairs.findIndex(qa => qa.videoId === currentQA.videoId);
                if (videoIndex >= 0) {
                    expandVideo(videoIndex);
                } else {
                    startNextSequence();
                }
            }, displayDuration);
        }
        
        // Run the Q&A sequence
        async function runSequence() {
            // Reset text container
            textContainer.innerHTML = '';
            
            // Get next QA pair
            currentQA = getNextQA();
            
            // Create question element
            const questionElement = document.createElement('div');
            questionElement.className = 'question typing';
            textContainer.appendChild(questionElement);
            
            // Type question with animation
            await typeText(questionElement, currentQA.question);
            
            // Create answer element
            const answerElement = document.createElement('div');
            answerElement.className = 'answer typing';
            textContainer.appendChild(answerElement);
            
            // Type answer with animation
            await typeText(answerElement, currentQA.answer);
            
            // Create video message element
            const videoMessageElement = document.createElement('div');
            videoMessageElement.className = 'video-message typing';
            textContainer.appendChild(videoMessageElement);
            
            // Type video message with animation
            await typeText(videoMessageElement, "Detailed explanation can be watched from the following video:");
        }
        
        // Handle window resize
        function handleResize() {
            positionCoverItems();
        }
        
        // Initialize the application
        function init() {
            createParticles();
            createCoverflow();
            startNextSequence();
            
            window.addEventListener('resize', handleResize);
            closeOverlayBtn.addEventListener('click', closeOverlay);
            
            // Close overlay when clicking on backdrop
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    closeOverlay();
                }
            });
        }
        
        // Start when page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>